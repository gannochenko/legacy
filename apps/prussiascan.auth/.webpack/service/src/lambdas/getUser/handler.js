(()=>{"use strict";var e={583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.awsOptions=void 0,t.awsOptions={endpoint:"http://localhost:4566",region:"eu-central-1",accessKeyId:"local",secretAccessKey:"local"}},523:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fn=void 0;const s=r(336),n=o(r(344)),a=r(583),i=new s.DynamoDB.DocumentClient({...a.awsOptions,apiVersion:"2012-08-10"}),l=null!=="prussiascan.auth_Users"?"prussiascan.auth_Users":"";t.fn=async({token:e})=>{const t={data:{},errors:[],expired:!1};try{const{userId:r}=n.default.verify(e,"really-secret-secret"),o=await i.get({TableName:l,Key:{id:r},AttributesToGet:["id"]}).promise();(null==o?void 0:o.Item)?t.data={id:r,type:"user",attributes:{}}:t.errors.push({message:"User not found"})}catch(e){t.errors.push({message:"Token expired"}),t.expired=!0}return t}},336:e=>{e.exports=require("aws-sdk")},344:e=>{e.exports=require("jsonwebtoken")}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{r.r(o),r.d(o,{handler:()=>s});var e=r(523);const t=(e,t)=>(console.log(t),{statusCode:e,headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":process.env.CORS},body:JSON.stringify(t)}),s=(r,o,s)=>{const{body:n,httpMethod:a,headers:i,queryStringParameters:l,requestContext:{path:u,domainName:c}}=r,{functionName:d,memoryLimitInMB:p,getRemainingTimeInMillis:y}=o;let f={};try{f=JSON.parse(n)}catch(e){return s(null,t(400))}return(0,e.fn)(f).then((e=>{e.errors.length?s(null,t(400,e)):s(null,t(200,e))})).catch((e=>{console.error(e),s(null,t(500))})),!0}})();var s=exports;for(var n in o)s[n]=o[n];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();